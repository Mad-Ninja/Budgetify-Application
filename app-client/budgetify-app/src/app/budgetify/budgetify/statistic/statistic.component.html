<div class="budgetify__statistic">
  <app-card></app-card>
  <div class="budgetify__statistic-content">
    <div class="statistic-btns">
      <mat-button-toggle-group
        name=""
        aria-label="Font Style"
        [(ngModel)]="buttonValue"
      >
        <mat-button-toggle
          value="categories"
          class="statistic-btns__categories"
          (click)="toggleDisplay()"
          >Categories Statistic</mat-button-toggle
        >
        <mat-button-toggle
          value="monthly"
          class="statistic-btns__montly"
          (click)="toggleDisplay()"
          >Monthly Statistic</mat-button-toggle
        >
      </mat-button-toggle-group>
    </div>
    <mat-form-field class="data-picker">
      <mat-label>Enter a date range</mat-label>
      <mat-date-range-input [rangePicker]="picker">
        <input matStartDate placeholder="Start date" class="start-date" />
        <input matEndDate placeholder="End date" class="end-date" />
      </mat-date-range-input>
      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-date-range-picker #picker></mat-date-range-picker>
    </mat-form-field>

    <div class="statistic-categories__wrapper" *ngIf="isShowCategories">
      <div class="total-expenses__output">
        <form class="example-form">
          <mat-form-field class="example-full-width">
            <mat-label>Total Expenses</mat-label>
            <input matInput #message disabled />
          </mat-form-field>
        </form>
      </div>
      <!-- Ctegories Statistic Table -->
      <div class="statistic-table__categories">
        <mat-table [dataSource]="dataSource" class="mat-elevation-z8">
          <!-- category Column -->
          <ng-container matColumnDef="category">
            <mat-header-cell *matHeaderCellDef> Category </mat-header-cell>
            <mat-cell *matCellDef="let element">
              {{ element.category }}
            </mat-cell>
          </ng-container>
          <!-- amount Column -->
          <ng-container matColumnDef="amount">
            <mat-header-cell *matHeaderCellDef> Amount </mat-header-cell>
            <mat-cell *matCellDef="let element">
              {{ element.amount }}
            </mat-cell>
          </ng-container>
          <!-- % in total Column -->
          <ng-container matColumnDef="total">
            <mat-header-cell *matHeaderCellDef> % in total </mat-header-cell>
            <mat-cell *matCellDef="let element">
              {{ element.total }}
            </mat-cell>
          </ng-container>

          <mat-header-row
            *matHeaderRowDef="displayedColumnsCategories"
          ></mat-header-row>
          <mat-row
            *matRowDef="let row; columns: displayedColumnsCategories"
          ></mat-row>
        </mat-table>
      </div>
    </div>

    <!-- Month Statistic Table -->
    <div class="statistic-table__month" *ngIf="isShowMonthly">
      <table
        mat-table
        [dataSource]="statisticService.MONTHLY_STATISTIC"
        class="mat-elevation-z8"
      >
        <!-- Month Column -->
        <ng-container matColumnDef="month">
          <th mat-header-cell *matHeaderCellDef>Month</th>
          <td mat-cell *matCellDef="let monthItem">
            {{ monthItem.month }}
          </td>
          <td mat-footer-cell *matFooterCellDef>Total</td>
        </ng-container>

        <!-- income Column -->
        <ng-container matColumnDef="income">
          <th mat-header-cell *matHeaderCellDef>Income</th>
          <td mat-cell *matCellDef="let incomeValue">
            {{ incomeValue.income | currency }}
          </td>
          <td mat-footer-cell *matFooterCellDef>
            {{ statisticService.getTotalIncome() | currency }}
          </td>
        </ng-container>
        <!-- expenses Column -->
        <ng-container matColumnDef="expense">
          <th mat-header-cell *matHeaderCellDef>Expenses</th>
          <td mat-cell *matCellDef="let expenseValue">
            {{ expenseValue.expense | currency }}
          </td>
          <td mat-footer-cell *matFooterCellDef>
            {{ statisticService.getTotalExpenses() | currency }}
          </td>
        </ng-container>
        <!-- economy Column -->
        <ng-container matColumnDef="economy">
          <th mat-header-cell *matHeaderCellDef>Economy</th>
          <td mat-cell *matCellDef="let economyValue">
            {{ economyValue.economy | currency }}
          </td>
          <td mat-footer-cell *matFooterCellDef>
            {{ statisticService.getTotalEconomy() | currency }}
          </td>
        </ng-container>
        <!-- percentOfEconomy Column -->
        <ng-container matColumnDef="percentOfEconomy">
          <th mat-header-cell *matHeaderCellDef>% of Economy</th>
          <td mat-cell *matCellDef="let percentOfEconomyValue">
            {{ percentOfEconomyValue.percentOfEconomy | currency }}
          </td>
          <td mat-footer-cell *matFooterCellDef>
            {{ statisticService.getTotalPercentOfEconomy() | currency }}
          </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="displayedColumnsMonthly"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumnsMonthly"></tr>
        <tr mat-footer-row *matFooterRowDef="displayedColumnsMonthly"></tr>
      </table>
    </div>
  </div>
</div>
